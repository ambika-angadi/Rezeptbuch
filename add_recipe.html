<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Add Recipe page</title>
    </head>
<body>
<!---Add Recipe heading-->
<h1>Add Recipe</h1>

<!-- Add Recipe Form -->
<form>
    <label for="recipe-name">Name:</label>
    <input type="text" id="recipe-name" required>
    <br>
    <label for="recipe-ingredients">Ingredients:</label>
    <textarea id="recipe-ingredients" rows="5" required></textarea>
    <br>
    <label for="recipe-method">Method:</label>
    <textarea id="recipe-method" rows="10" required></textarea>
    <br>
    <label for="recipe-image">Image Source:</label>
    <input type="text" id="recipe-image" required>
    <br>
    <button type="submit">Add Recipe</button>
</form>

<!-- Recipe List -->
<div id="recipeList" class="starters-list"></div>

<script>
    //Get DOM elements
    const form = document.querySelector('form');
    const recipeDiv = document.getElementById('recipeList');

    //Handle form submit
    function handleSubmit(event) {
        //Prevent default form submission behavior
        event.preventDefault();

        // Get form input values
        const nameInput = document.getElementById('recipe-name');
        const ingredientsInput = document.getElementById('recipe-ingredients');
        const instructionsInput = document.getElementById('recipe-method');
        const imageInput = document.getElementById('recipe-image');

        // Retrieve input values
        const name = nameInput.value;
        const ingredients = ingredientsInput.value.split('\n').map(item => item.trim()).filter(item => item !== '');
        const instructions = instructionsInput.value.split('\n').map(item => item.trim()).filter(item => item !== '');
        const image = imageInput.value;

        // Check if recipe name, ingredients, and instructions are valid
        if (name && ingredients.length > 0 && instructions.length > 0 && image) {
            const recipe = {
                name,
                ingredients,
                instructions,
                image
            };

            // Save the recipe in local storage
            localStorage.setItem("recipe", JSON.stringify(recipe));

            // Clear form inputs
            nameInput.value = '';
            ingredientsInput.value = '';
            instructionsInput.value = '';
            imageInput.value = '';

            // Display the recipe
            displayRecipe(recipe);
        }
    }

    // Display recipe
    function displayRecipe(recipe) {
        recipeDiv.innerHTML = `
            <h3>${recipe.name}</h3>
            <p><strong>Ingredients:</strong></p>
            <ul>
                ${recipe.ingredients.map(ingr => `<li>${ingr}</li>`).join('')}
            </ul>
            <p><strong>Method:</strong></p>
            <p>${recipe.instructions.join('<br>')}</p>
            <img src="${recipe.image}" alt="Recipe Image" style="width: 200px; height: 100px;">
        `;
        recipeDiv.classList.add('recipe');
    }

    // Add event listener
    form.addEventListener('submit', handleSubmit);
</script>
</body>
</html>
